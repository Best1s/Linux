### DevOps理念
透过自动化“软件交付”和“架构变更”的流程，来使得构建，测试，发布软件更加地快捷，频繁，可靠。

DevOps is about workflow 流程化，标准化，减少脱节环节浪费时间
DevOps is about culture 节约时间
DevOps is about automation 自动化降低人工时间消耗
DevOps is about quality 质量提升可以避免返工。

解决：
等待基础架构 -> 消除不必要的流程
等待应用程序部署 -> 消除不必要的特性
等待其他团队 -> 消除不必要的人工
等待审核完成 -> 消除不必要的返工

DevOps 是为了解决“时间”和“质量”而产生的一种交付文化，流程，交付方式等等的统称。
DevOps 期望通过消除“等待”和“浪费”的方式实现更快速，更高质量的交付。

DevOps 不仅仅是简单的自动化流程，更多的是开发方式，开发流程的变革。但由于团队架构，工具生态，技术架构等等因素，难以有规范式的流程参考，更多的是在某些特定的场景或者交付流程中实现了部分的最佳实践。

### 微服务概念
微服务是由以单一应用程序构成的小服务，微服务之间相互解耦，以全自动的方式部署，与其他服务使用 HTTP API 通讯。同时服务会使用最小规模的集中管理能力（例如 Docker）能力，服务可以用不同的编程语言与数据库等元件。

微服务特性
1. 服务组件化 - 每一个组件都有完整的声明周期，包含自己的API，可以独立存在

2. 按照业务组织团队 - 缩小模块的辩解，每个模块可以独立负责

3. 做产品的态度 - 模块的 Owner 要以产品的思维考虑模型的设计与演进

4. 智能端点和哑管道 - 服务之间调用的断点可以动态获取以服务发现的方式提供，对于出错的场景提供熔断器。

5. 去中心化治理 - 根据业务特点选择语言与框架

6. 去中心化管理书籍 -  不同的模块使用不同的库或者不同的表，不会出现相互调用的场景

7. 基础设施自动化 - 自动化部署，自动化交付

8. 容错设计 - 组件是不可信的，对于失败的状态需要有降级的处理

9. 演进式设计 - 设计组件的时候需要明确和规划组件的边界 

微服务优点

1. 通过大型的单体系统拆分成多个微服务，可以解决应用复杂性的问题，并且每个微服务可以更好的切分业务边界。

2. 每个模块都有专门的团队和人员负责，可以选择最合适的技术进行实现，使得架构演进更简单，降低历史技术债务。

3. 微服务之间相互并不影响与依赖，降低耦合度，可以独立升级。

4. 微服务切分后都是独立部署，可以根据业务的特征调整资源。

微服务完美匹配 DevOps 理念

1. 大型应用拆分为微服务，让责任边界更明确，变向引导交付流程变革。
2. 清晰的边界，独立的部署，为更快的迭代和交付流程自动化提供可靠。
3. 越小的业务边界使得实现的复杂性降低，可以提高交付的质量。

微服务的缺点
 - 将一个大型的系统拆分成微服务涉及系统的分布式改造，带来了固然的技术成本
 - 更清晰的边界划分也使得标准化变得困难，微服务依赖上层的框架进行规约
 - 单体应用内部的通讯成本远低于微服务组件间通讯。
 - 管理多个组件或者组件拓扑成为微服务系统的头筹要务。
 - 数据库的设计与业务规划成为微服务中的难点，对开发者提出更多的要求。
 
**架构方式要高，管理与集成自动化程度高，标准化成本高*

容器解决的微服务的缺点
1. Dockerfile 将微服务中的语言，框架等复杂性进行了封装。
2. Dockerfile 将交付最小单元进行了定义，降低了交付复杂性
3. Dcoker 的 API 以及上层的编排系统实现了拓扑的管理。
4. 越来越丰富的容器生态使得微服务不指从交付，更从框架级别进行了支持。

DevOps 交付链
DevOps 微服务  容器


简单的持续交付链
```
		(提交代码变更)		  (Webhook通知)		 (容器服务触发器通知)
代码开发 ------------> 代码仓库 -------------> 镜像服务 -----------------> 容器服务集群
							  <------------	      <----------------
							  (拉取代码自动构建)		(拉取最新镜像部署)
```


### 容器交付流程划分

本地开发阶段
- 代码编写
- 测试编写
- 容器化测试
- Dockerfile 编写
- 编排模版编写

持续集成与持续交付
- 构建代码
- 打包构建产物
- 构建 Docker 镜像
- 推送 Docker 镜像
- 部署编排模板

环境部署
- 调整应用拓扑
- 调整接入层配置
- 调整扩缩容配置

监控，运维与调优
- 基础监控资源设置告警
- APM 监控应用内部指标
- 安装调优工具进行调优

Cloud Foundry VMware 推出的第一个开源 PaaS 平台 三个维度：基础的系统依赖，软件运行时的依赖，软件的运行方式。